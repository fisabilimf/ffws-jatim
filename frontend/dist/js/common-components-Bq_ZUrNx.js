import{r as u,j as e}from"./react-vendor-DaqBZZGs.js";import{f as X}from"./services-BwnLzVAF.js";import{A as J}from"./device-components-BT-2M-h3.js";import{R as $,L as Y,C as _,X as E,Y as D,T as W,a as z,b as P,A as G,c as M}from"./charts-vendor-Dz8ZTeTz.js";const U="modulepreload",Q=function(t){return"/"+t},V={},Z=function(k,b,j){let d=Promise.resolve();if(b&&b.length>0){let h=function(r){return Promise.all(r.map(s=>Promise.resolve(s).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),x=l?.nonce||l?.getAttribute("nonce");d=h(b.map(r=>{if(r=Q(r),r in V)return;V[r]=!0;const s=r.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const n=document.createElement("link");if(n.rel=s?"stylesheet":U,s||(n.as="script"),n.crossOrigin="",n.href=r,x&&n.setAttribute("nonce",x),document.head.appendChild(n),s)return new Promise((g,p)=>{n.addEventListener("load",g),n.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${r}`)))})}))}function v(l){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=l,window.dispatchEvent(x),!x.defaultPrevented)throw l}return d.then(l=>{for(const x of l||[])x.status==="rejected"&&v(x.reason);return k().catch(v)})},q=({onSearch:t,placeholder:k="Cari di Maps",isSidebarOpen:b=!1,mapboxMap:j=null})=>{const[d,v]=u.useState(""),[l,x]=u.useState(!1),[h,r]=u.useState([]),s={Jakarta:[106.8456,-6.2088],Surabaya:[112.7508,-7.2575],Bandung:[107.6191,-6.9175],Yogyakarta:[110.3695,-7.7956],Semarang:[110.4204,-6.9667],Medan:[98.6722,3.5952],Palembang:[104.7458,-2.9765],Makassar:[119.4327,-5.1477],Denpasar:[115.2126,-8.6705],Bali:[115.2126,-8.6705],Malang:[112.6308,-7.9831],Sidoarjo:[112.7183,-7.4478],Probolinggo:[113.7156,-7.7764],Pasuruan:[112.6909,-7.6461],Mojokerto:[112.4694,-7.4706],Lamongan:[112.3333,-7.1167],Gresik:[112.5729,-7.1554],Tuban:[112.0483,-6.8976],Bojonegoro:[111.8816,-7.15],Jombang:[112.2333,-7.55],Nganjuk:[111.8833,-7.6],Kediri:[112.0167,-7.8167],Blitar:[112.1667,-8.1],Tulungagung:[111.9,-8.0667],Bangil:[112.7333,-7.6],Lawang:[112.6833,-7.8333],Singosari:[112.65,-7.9],Wates:[110.3569,-7.9133],Lempuyangan:[110.3739,-7.7884]},o=c=>{c.preventDefault(),d.trim()&&n(d)},n=c=>{let a=!1;for(const i in s)if(c.toLowerCase().includes(i.toLowerCase())){const m=s[i];j&&j.current&&j.current.flyTo({center:m,zoom:12,pitch:45,bearing:-17.6,speed:1.2,curve:1.4,easing:y=>y,essential:!0}),t&&t(c),a=!0;break}a||(console.log(`Location not found: ${c}`),t&&t(c)),r([])},g=c=>{const a=c.target.value;if(v(a),a.trim()){const i=Object.keys(s).filter(m=>m.toLowerCase().includes(a.toLowerCase()));if(i.length>0)r(i);else{const m=[`${a} Jakarta`,`${a} Surabaya`,`${a} Bandung`,`${a} Yogyakarta`,`${a} Bali`];r(m)}}else r([])},p=c=>{v(c),r([]),n(c)},C=()=>{v(""),r([])};return e.jsx("div",{className:"fixed top-4 z-[70] transition-all duration-300 ease-in-out left-4 transform translate-x-0",children:e.jsx("div",{className:"w-92",children:e.jsxs("form",{onSubmit:o,className:"relative",children:[e.jsx("div",{className:`bg-white rounded-lg shadow-lg transition-all duration-200 p-1.5 sm:p-2 ${l?"shadow-xl ring-2 ring-blue-500":""}`,children:e.jsxs("div",{className:"flex items-center py-1 sm:py-1.5",children:[e.jsx("div",{className:"flex-shrink-0 mr-2",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:d,onChange:g,onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),200),placeholder:k,className:"flex-1 text-gray-900 placeholder-gray-500 bg-transparent border-none outline-none text-sm leading-none"}),d&&e.jsx("div",{className:"flex-shrink-0 ml-2",children:e.jsx("button",{type:"button",onClick:C,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Hapus pencarian",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:e.jsx("button",{type:"button",className:"p-1 hover:bg-gray-100 rounded-full transition-colors",title:"Petunjuk arah",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})})})]})}),h.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg z-10 overflow-hidden",children:h.map((c,a)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer transition-colors text-sm",onClick:()=>p(c),children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c]})},a))})]})})})},he=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),ee=()=>{const t=["Aman","Waspada","Bahaya"],k=()=>e.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10 16l6-12H4l6 12z"})});return e.jsxs("div",{className:"w-80 rounded-lg bg-white/20 backdrop-blur-lg p-4 sm:p-1 border border-white/30 flex flex-col gap-2 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800 text-center",children:"Level Ketinggian Air"})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"h-4 rounded-full shadow-inner",children:e.jsx("div",{className:"h-full rounded-full",style:{background:"linear-gradient(to right, #10b981, #f59e0b, #ef4444)"}})}),e.jsx("div",{className:"grid grid-cols-3 text-center -mx-2",children:t.map(b=>e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx(k,{}),e.jsx("span",{className:"text-[11px] font-medium text-gray-700",children:b})]},b))})]})]})},ge=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),R=u.lazy(()=>Z(()=>Promise.resolve().then(()=>ne),void 0)),te=({onDataUpdate:t,onStationSelect:k,onMapFocus:b,isSidebarOpen:j=!1})=>{const[d,v]=u.useState([]),l=s=>{const o=[];let n=s-(Math.random()*.5+.2);for(let g=0;g<20;g++){const p=(Math.random()-.5)*.15;n=Math.max(.5,Math.min(5,n+p)),o.push(parseFloat(n.toFixed(2)))}return o};u.useEffect(()=>{const s=n=>{const g=n.map(p=>{const C=parseFloat((Math.random()*4.5+.5).toFixed(2));return{id:p.id,name:p.name,value:C,unit:"m",location:p.river_basin?p.river_basin.name:"Unknown",coordinates:[parseFloat(p.longitude),parseFloat(p.latitude)],status:"safe",history:l(C)}});v(g)};(async()=>{try{const n=await X();n&&n.length>0&&s(n)}catch(n){console.error("Failed to fetch devices for running bar:",n)}})()},[]),u.useEffect(()=>{if(d.length===0)return;const o=setInterval(()=>{v(n=>n.map(g=>{let p=Math.max(.5,Math.min(5,g.value+(Math.random()-.5)*.2));const C="safe",c=[...g.history.slice(1),p];return{...g,value:p,status:C,history:c}}))},3e3);return()=>clearInterval(o)},[d]),u.useEffect(()=>{t&&d&&d.length>0&&t(d)},[d,t]);const x=s=>{switch(s){case"safe":return"bg-green-500";case"warning":return"bg-yellow-500";case"alert":return"bg-red-500";default:return"bg-gray-500"}},h=s=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:1,maximumFractionDigits:1}).format(s);if(d.length===0)return null;const r=d.length*4;return e.jsxs("div",{className:"fixed top-4 z-[70] transition-all duration-300 ease-in-out left-[calc(368px+2rem)] flood-running-bar",children:[e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-hidden bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-1.5 sm:p-2",children:e.jsxs("div",{className:"flex space-x-2 sm:space-x-2 whitespace-nowrap",style:{animation:`infiniteScroll ${r}s linear infinite`,width:"fit-content"},children:[d.map(s=>e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2 rounded-lg px-1.5 sm:px-2 py-1 sm:py-1.5 min-w-max border border-gray-200",children:[e.jsx("div",{className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${x(s.status)}`}),e.jsx("span",{className:"text-xs text-gray-700 font-medium truncate max-w-12 sm:max-w-16",children:s.name.replace("Stasiun ","")}),e.jsxs("div",{className:"flex items-center space-x-0.5 sm:space-x-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:h(s.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:s.unit})]}),e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded animate-pulse"}),children:e.jsx(R,{data:s.history,width:48,height:22,showTooltip:!1,miniMode:!0,status:s.status,canvasId:`chart-first-${s.id}`,className:"w-12 h-6 rounded"})})]},`first-${s.id}`)),d.map(s=>e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2 rounded-lg px-1.5 sm:px-2 py-1 sm:py-1.5 min-w-max border border-gray-200",children:[e.jsx("div",{className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${x(s.status)}`}),e.jsx("span",{className:"text-xs text-gray-700 font-medium truncate max-w-12 sm:max-w-16",children:s.name.replace("Stasiun ","")}),e.jsxs("div",{className:"flex items-center space-x-0.5 sm:space-x-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:h(s.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:s.unit})]}),e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded animate-pulse"}),children:e.jsx(R,{data:s.history,width:48,height:22,showTooltip:!1,miniMode:!0,status:s.status,canvasId:`chart-second-${s.id}`,className:"w-12 h-6 rounded"})})]},`second-${s.id}`))]})})}),e.jsx("style",{children:`
                @keyframes infiniteScroll {
                    0% {
                        transform: translateX(0);
                    }
                    100% {
                        transform: translateX(-50%);
                    }
                }
                
<<<<<<< HEAD:frontend/src/components/FloodRunningBar.jsx
                /* Responsive right positioning based on FilterButton size */
                .flood-running-bar {
                    right: calc(1.5rem + 40px + 2rem); /* Mobile: 1.5rem margin + 40px button + 2rem margin */
=======
                /* Right spacing = outer margin (1rem) + FilterButton (48px) + gap (1rem) */
                .flood-running-bar {
                    right: calc(1rem + 48px + 1rem);
>>>>>>> 001df2bf4b5158ab0d9ab0f11161b180954cc48c:frontend/src/components/common/FloodRunningBar.jsx
                }
                
                @media (min-width: 640px) {
                    .flood-running-bar {
<<<<<<< HEAD:frontend/src/components/FloodRunningBar.jsx
                        right: calc(1.5rem + 40px + 2rem); /* Desktop: 1.5rem margin + 40px button + 2rem margin */
=======
                        right: calc(1rem + 48px + 1rem);
>>>>>>> 001df2bf4b5158ab0d9ab0f11161b180954cc48c:frontend/src/components/common/FloodRunningBar.jsx
                    }
                }
            `})]})},fe=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"})),se=({isOpen:t,onOpen:k,onClose:b,title:j="Filter",subtitle:d,children:v,widthClass:l="w-80",tickerData:x,handleStationChange:h,currentStationIndex:r,handleAutoSwitchToggle:s})=>{const[o,n]=u.useState(!1),[g,p]=u.useState("controls"),[C,c]=u.useState([{id:"stations",name:"Stasiun Monitoring",color:"#3B82F6",enabled:!1},{id:"rivers",name:"Sungai",color:"#06B6D4",enabled:!1},{id:"flood-risk",name:"Area Risiko Banjir",color:"#F59E0B",enabled:!1},{id:"rainfall",name:"Data Curah Hujan",color:"#10B981",enabled:!1},{id:"elevation",name:"Elevasi Terrain",color:"#8B5CF6",enabled:!1},{id:"administrative",name:"Batas Administrasi",color:"#6B7280",enabled:!1}]);u.useEffect(()=>{if(t){const i=setTimeout(()=>n(!0),10);return()=>clearTimeout(i)}else n(!1)},[t]);const a=i=>{c(m=>m.map(y=>y.id===i?{...y,enabled:!y.enabled}:y))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-4 right-4 z-[80]",children:e.jsx("button",{onClick:k,className:"relative inline-flex items-center justify-center w-12 h-12 rounded-full bg-white hover:bg-blue-50 transition-colors",title:"Buka Filter","aria-label":"Buka Filter",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"relative z-10 w-6 h-6 text-blue-600 mix-blend-normal pointer-events-none",children:e.jsx("path",{d:"M22 3H2l8 9v7l4 2v-9l8-9z"})})})}),t&&e.jsxs("div",{className:`fixed rounded-tl-lg rounded-bl-lg top-20 right-0 h-[calc(80%-8%)] ${l} bg-white shadow-2xl z-[70] transform transition-all duration-300 ease-in-out flex flex-col ${o?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,style:{willChange:"transform, opacity"},children:[e.jsxs("div",{className:"rounded-tl-lg flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sliders,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter & Controls"}),d&&e.jsx("p",{className:"text-gray-500 text-sm",children:d})]})]}),e.jsxs("button",{onClick:()=>{n(!1),setTimeout(()=>{b&&b()},300)},className:"p-1.5 hover:bg-gray-200 rounded-md transition-colors",title:"Tutup","aria-label":"Tutup panel filter",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4",children:[e.jsxs("section",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(ToggleRight,{className:"w-4 h-4 text-blue-600"}),"Device Auto Switch"]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:e.jsx(J,{tickerData:x,onStationChange:h,currentStationIndex:r,onAutoSwitchToggle:s})})]}),e.jsxs("section",{className:"mt-4 space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Layers,{className:"w-4 h-4 text-blue-600"}),"Map Layers"]}),e.jsx("div",{className:"space-y-3",children:C.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.name})]}),e.jsx("button",{onClick:()=>a(i.id),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${i.enabled?"bg-blue-600":"bg-gray-300"}`,type:"button",children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${i.enabled?"translate-x-5":"translate-x-1"}`})})]},i.id))}),e.jsx("div",{className:"mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200 space-y-1",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(AlertTriangle,{className:"w-4 h-4 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-xs text-amber-800",children:[e.jsx("div",{className:"font-medium",children:"Layer Control"}),e.jsx("div",{className:"mt-1",children:"Beberapa layer mungkin memerlukan waktu loading tambahan."})]})]})})]})]}),e.jsx("div",{className:"rounded-bl-lg border-t border-gray-200 p-4 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{children:"Map Layer Control"})})}),e.jsx("div",{className:"text-gray-400",children:"Filter v1.0"})]})})]})]})},pe=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),ae=({data:t=[],width:k=320,height:b=160,showTooltip:j=!0,className:d="",onDataPointHover:v=null,miniMode:l=!1,status:x="safe",canvasId:h="chart-canvas"})=>{const[r,s]=u.useState({visible:!1,x:0,y:0,data:null,position:"top"}),o=u.useRef(null),n=u.useCallback(c=>{const a=[],i=new Date;for(let m=c-1;m>=0;m--){const y=new Date(i.getTime()-m*30*1e3);a.push(y)}return a},[]),g=u.useCallback((c,a,i)=>{const L=a;i.height-a;const f=L<68;let S=c;const w=100/2;c-w<8?S=8+w:c+w>i.width-8&&(S=i.width-8-w);let N=f?a+10:a-10;return{x:S,y:N,position:f?"bottom":"top"}},[]);u.useEffect(()=>{if(t.length===0)return;const c=document.getElementById(h);if(!c)return;const a=c.getContext("2d"),i=c.width,m=c.height;if(a.clearRect(0,0,i,m),t.length<2)return;const y=Math.min(...t),B=Math.max(...t),L=B-y||1;let f="#10B981";if(x)switch(x){case"safe":f="#10B981";break;case"warning":f="#F59E0B";break;case"alert":f="#EF4444";break;default:f="#6B7280";break}else B>4?f="#EF4444":B>2.5&&(f="#F59E0B");const S=a.createLinearGradient(0,0,0,m);if(S.addColorStop(0,f+"50"),S.addColorStop(.3,f+"40"),S.addColorStop(.6,f+"25"),S.addColorStop(1,f+"05"),a.beginPath(),a.fillStyle=S,a.moveTo(0,m),t.forEach((w,N)=>{const T=N/(t.length-1)*i,F=m-(w-y)/L*m;a.lineTo(T,F)}),a.lineTo(i,m),a.closePath(),a.fill(),a.beginPath(),a.strokeStyle=f,a.lineWidth=2,a.lineCap="round",a.lineJoin="round",t.forEach((w,N)=>{const T=N/(t.length-1)*i,F=m-(w-y)/L*m;N===0?a.moveTo(T,F):a.lineTo(T,F)}),a.stroke(),!l&&r.visible&&r.data){const w=r.data.index;if(w>=0&&w<t.length){const N=w/(t.length-1)*i,T=t[w],F=m-(T-y)/L*m;a.beginPath(),a.fillStyle=f,a.arc(N,F,6,0,2*Math.PI),a.fill(),a.beginPath(),a.strokeStyle="#FFFFFF",a.lineWidth=2,a.arc(N,F,6,0,2*Math.PI),a.stroke(),a.beginPath(),a.strokeStyle=f,a.lineWidth=1,a.setLineDash([5,5]),a.moveTo(N,0),a.lineTo(N,m),a.stroke(),a.setLineDash([])}}},[t,r,j,l,x,h]);const p=u.useCallback(c=>{!j||t.length===0||l||(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{const a=document.getElementById(h);if(!a)return;const i=a.getBoundingClientRect(),m=c.clientX-i.left,y=c.clientY-i.top;if(m<0||m>i.width||y<0||y>i.height){s({visible:!1,x:0,y:0,data:null});return}const B=a.width,L=a.height,f=Math.round(m/B*(t.length-1));if(f>=0&&f<t.length){const S=t[f],N=n(t.length)[f],T=Math.min(...t),I=Math.max(...t)-T||1,H=f/(t.length-1)*B,K=L-(S-T)/I*L,A=g(H,K,{width:B,height:L}),O={value:S,timestamp:N,index:f};s({visible:!0,x:A.x,y:A.y,data:O,position:A.position}),v&&v(O)}},16))},[j,t,l,h,n,g,v]),C=u.useCallback(()=>{l||(o.current&&clearTimeout(o.current),s({visible:!1,x:0,y:0,data:null}))},[l]);return e.jsxs("div",{className:`relative ${d}`,children:[e.jsx("canvas",{id:h,width:k,height:b,className:`w-full rounded bg-white ${j&&!l?"cursor-crosshair":""} ${l?"transition-all duration-300 hover:scale-105":""}`,onMouseMove:p,onMouseLeave:C}),!l&&j&&r.visible&&r.data&&e.jsx("div",{className:"absolute bg-gray-900 text-white text-xs rounded-md px-2 py-1.5 shadow-lg pointer-events-none z-50 border border-gray-700 transition-all duration-150 ease-out",style:{left:`${r.x}px`,top:`${r.y}px`,transform:r.position==="top"?"translate(-50%, -100%)":"translate(-50%, 0%)",minWidth:"80px",maxWidth:"120px"},children:e.jsxs("div",{className:"text-center space-y-0.5",children:[e.jsxs("div",{className:"font-semibold text-white text-xs",children:[r.data.value.toFixed(2),"m"]}),e.jsx("div",{className:"text-gray-300 text-xs",children:r.data.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),e.jsx("div",{className:"text-gray-400 text-xs",children:r.data.timestamp.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})})]})})]})},re=u.memo(ae),ne=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),le=({actualData:t=[],predictedData:k=[],width:b=640,height:j=320,className:d="",canvasId:v="monitoring-chart"})=>{const l=u.useMemo(()=>k.length>0?k:t.map((r,s)=>{if(s===0)return r;const o=t[s-1],n=(r-o)*.6;return Math.max(0,r+n)}),[t,k]),x=u.useMemo(()=>t.map((r,s)=>({time:`T${s+1}`,actual:r,predicted:l[s]||0})),[t,l]),h=({active:r,payload:s,label:o})=>r&&s&&s.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:`Waktu: ${o}`}),s.map((n,g)=>e.jsx("p",{className:"text-sm",style:{color:n.color},children:`${n.dataKey}: ${n.value.toFixed(2)}m`},g))]}):null;return t.length===0?e.jsx("div",{className:`relative ${d}`,children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 text-lg",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"Tidak Ada Data"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Data monitoring akan ditampilkan di sini"})]})})}):e.jsxs("div",{className:`relative ${d}`,children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:e.jsx($,{width:"100%",height:j,children:e.jsxs(Y,{data:x,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(_,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),e.jsx(E,{dataKey:"time",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(D,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,label:{value:"Level Air (m)",angle:-90,position:"insideLeft"}}),e.jsx(W,{content:e.jsx(h,{})}),e.jsx(z,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),e.jsx(P,{type:"monotone",dataKey:"actual",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2},name:"Data Aktual"}),e.jsx(P,{type:"monotone",dataKey:"predicted",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#ef4444",strokeWidth:2,r:3},activeDot:{r:5,stroke:"#ef4444",strokeWidth:2},name:"Prediksi"})]})})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsx("div",{className:"font-medium text-blue-800",children:"Data Aktual"}),e.jsx("div",{className:"text-blue-600",children:t.length>0?`Terakhir: ${t[t.length-1].toFixed(1)}m`:"Tidak ada data"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:[e.jsx("div",{className:"font-medium text-red-800",children:"Prediksi"}),e.jsx("div",{className:"text-red-600",children:l.length>0?`Terakhir: ${l[l.length-1].toFixed(1)}m`:"Tidak ada data"})]})]})]})},ve=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),ie=({stationData:t,chartHistory:k=[],width:b=560,height:j=220,className:d="w-full"})=>{const v=r=>{switch(r){case"safe":return"text-green-500";case"warning":return"text-yellow-500";case"alert":return"text-red-500";default:return"text-gray-400"}},l=r=>{switch(r){case"safe":return"Aman";case"warning":return"Waspada";case"alert":return"Bahaya";default:return"Normal"}};if(!t)return e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 text-lg",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"Tidak Ada Data"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Data perkembangan air sungai akan ditampilkan di sini"})]})});const x=u.useMemo(()=>{const r=t.value||.2,o=[{x:0,levee:3.5},{x:1,levee:3.5},{x:2,levee:3.5},{x:3,levee:3.5},{x:4,levee:3.5},{x:5,levee:3.2},{x:6,levee:2.5},{x:7,levee:2},{x:8,levee:1},{x:9,levee:.8},{x:10,levee:.4},{x:11,levee:.2},{x:12,levee:.2},{x:13,levee:.2},{x:14,levee:.2},{x:15,levee:.4},{x:16,levee:.8},{x:17,levee:1},{x:18,levee:2},{x:19,levee:2.5},{x:20,levee:3.2},{x:21,levee:3.5},{x:22,levee:3.5},{x:23,levee:3.5},{x:24,levee:3.5}].map(n=>({x:n.x,levee:n.levee,water:r}));return console.log("TanggulAktual chartData (muka air rata):",o),o},[t.value]),h=({active:r,payload:s,label:o})=>{if(r&&s&&s.length){const n=t.value||.2,g=s.find(C=>C.name==="Bingkai Tanggul"),p=g?g.value:null;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Level Air: ",n.toFixed(2),"m"]}),p!==null&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Tinggi Tanggul: ",p.toFixed(2),"m"]})]})}return null};return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm ${d}`,children:[e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Perkembangan Air Sungai Aktual"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${v(t.status).replace("text-","bg-")}`}),e.jsx("span",{className:`text-sm font-medium ${v(t.status)}`,children:l(t.status)})]})})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.location})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{style:{width:"100%",height:j},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(G,{data:x,margin:{top:20,right:80,left:60,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"leveeGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#E5E7EB"}),e.jsx("stop",{offset:"50%",stopColor:"#D1D5DB"}),e.jsx("stop",{offset:"100%",stopColor:"#9CA3AF"})]}),e.jsxs("linearGradient",{id:"waterGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#87CEEB",stopOpacity:.9}),e.jsx("stop",{offset:"50%",stopColor:"#87CEEB",stopOpacity:.7}),e.jsx("stop",{offset:"100%",stopColor:"#4682B4",stopOpacity:.5})]})]}),e.jsx(_,{strokeDasharray:"2 2",stroke:"#ffffff",strokeOpacity:.8}),e.jsx(E,{dataKey:"x",hide:!0,domain:[0,24]}),e.jsx(D,{domain:[0,4],tickLine:!1,axisLine:!1,fontSize:12,label:{value:"Tinggi Air (m)",angle:-90,position:"insideLeft"}}),e.jsx(W,{content:e.jsx(h,{})}),e.jsx(z,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),e.jsx(M,{type:"monotone",dataKey:"water",fill:"url(#waterGradient)",fillOpacity:.6,stroke:"none",strokeWidth:0,name:"Level Air"}),e.jsx(M,{type:"monotone",dataKey:"levee",fill:"url(#leveeGradient)",fillOpacity:1,stroke:"#9CA3AF",strokeWidth:2,name:"Bingkai Tanggul"})]})})})})]})},je=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),oe=({stationData:t,chartHistory:k=[],width:b=560,height:j=220,className:d="w-full"})=>{if(!t)return e.jsx("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 text-lg",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"Tidak Ada Data"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Data prediksi banjir akan ditampilkan di sini"})]})});const v=u.useMemo(()=>{const x=(t.value||.4)+.2,r=[{x:0,levee:3.5},{x:1,levee:3.5},{x:2,levee:3.5},{x:3,levee:3.5},{x:4,levee:3.5},{x:5,levee:3.2},{x:6,levee:2.5},{x:7,levee:2},{x:8,levee:1},{x:9,levee:.8},{x:10,levee:.4},{x:11,levee:.2},{x:12,levee:.2},{x:13,levee:.2},{x:14,levee:.2},{x:15,levee:.4},{x:16,levee:.8},{x:17,levee:1},{x:18,levee:2},{x:19,levee:2.5},{x:20,levee:3.2},{x:21,levee:3.5},{x:22,levee:3.5},{x:23,levee:3.5},{x:24,levee:3.5}].map(s=>({x:s.x,levee:s.levee,predicted:x}));return console.log("TanggulPrediksi chartData (muka air rata):",r),r},[t.value]),l=({active:x,payload:h,label:r})=>{if(x&&h&&h.length){const s=(t.value||.4)+.2,o=h.find(g=>g.name==="Bingkai Tanggul"),n=o?o.value:null;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Prediksi Level Air: ",s.toFixed(2),"m"]}),n!==null&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Tinggi Tanggul: ",n.toFixed(2),"m"]})]})}return null};return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm ${d}`,children:[e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prediksi"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Parameter dan threshold untuk prediksi banjir"})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{style:{width:"100%",height:j},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(G,{data:v,margin:{top:20,right:80,left:60,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"leveeGradientPred",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#E5E7EB"}),e.jsx("stop",{offset:"50%",stopColor:"#D1D5DB"}),e.jsx("stop",{offset:"100%",stopColor:"#9CA3AF"})]}),e.jsxs("linearGradient",{id:"waterPredGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.8}),e.jsx("stop",{offset:"50%",stopColor:"#ef4444",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#dc2626",stopOpacity:.4})]})]}),e.jsx(_,{strokeDasharray:"2 2",stroke:"#ffffff",strokeOpacity:.8}),e.jsx(E,{dataKey:"x",hide:!0,domain:[0,24]}),e.jsx(D,{domain:[0,4],tickLine:!1,axisLine:!1,fontSize:12,label:{value:"Tinggi Air (m)",angle:-90,position:"insideLeft"}}),e.jsx(W,{content:e.jsx(l,{})}),e.jsx(z,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"10px"}}),e.jsx(M,{type:"monotone",dataKey:"predicted",fill:"url(#waterPredGradient)",fillOpacity:1,stroke:"none",strokeWidth:0,name:"Prediksi"}),e.jsx(P,{type:"monotone",dataKey:"predicted",stroke:"#b91c1c",strokeWidth:0,dot:!1,activeDot:!1,legendType:"none"}),e.jsx(M,{type:"monotone",dataKey:"levee",fill:"url(#leveeGradientPred)",fillOpacity:1,stroke:"#9CA3AF",strokeWidth:2,name:"Bingkai Tanggul"})]})})})})]})},be=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ge as F,he as G,ve as M,je as T,Z as _,fe as a,pe as b,be as c};
