const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/common-components-Bq_ZUrNx.js","js/react-vendor-DaqBZZGs.js","js/mapbox-vendor-bGD9Ygvt.js","css/mapbox-vendor-BKWjo1HA.css","js/vendor-B-2OfL1z.js","js/services-BwnLzVAF.js","js/device-components-BT-2M-h3.js","js/charts-vendor-Dz8ZTeTz.js","js/MapboxMap-F8OBYxp3.js","js/sensor-components-F1jgNxPp.js"])))=>i.map(i=>d[i]);
import{_ as r}from"./common-components-Bq_ZUrNx.js";import{r as t,j as e}from"./react-vendor-DaqBZZGs.js";const T=t.lazy(()=>r(()=>import("./common-components-Bq_ZUrNx.js").then(l=>l.G),__vite__mapDeps([0,1,2,3,4,5,6,7]))),I=t.lazy(()=>r(()=>import("./MapboxMap-F8OBYxp3.js"),__vite__mapDeps([8,0,1,2,3,4,5,6,7]))),O=t.lazy(()=>r(()=>import("./common-components-Bq_ZUrNx.js").then(l=>l.F),__vite__mapDeps([0,1,2,3,4,5,6,7]))),P=t.lazy(()=>r(()=>import("./common-components-Bq_ZUrNx.js").then(l=>l.a),__vite__mapDeps([0,1,2,3,4,5,6,7]))),R=t.lazy(()=>r(()=>import("./sensor-components-F1jgNxPp.js").then(l=>l.S),__vite__mapDeps([9,1,2,3,4,0,5,6,7]))),z=t.lazy(()=>r(()=>import("./sensor-components-F1jgNxPp.js").then(l=>l.D),__vite__mapDeps([9,1,2,3,4,0,5,6,7]))),V=t.lazy(()=>r(()=>import("./common-components-Bq_ZUrNx.js").then(l=>l.b),__vite__mapDeps([0,1,2,3,4,5,6,7])));t.lazy(()=>r(()=>import("./device-components-BT-2M-h3.js").then(l=>l.a),__vite__mapDeps([6,1,2,3,4])));const F=({children:l})=>{const[u,f]=t.useState(null),[g,p]=t.useState(""),[h,n]=t.useState(null),[b,o]=t.useState(!1),[c,d]=t.useState(!1),[x,m]=t.useState(0),[i,w]=t.useState(!1),S=t.useRef(null),[_,y]=t.useState(!1),k=t.useCallback(s=>{p(s)},[]),v=t.useCallback(s=>{n(s),o(!0)},[]);t.useCallback(s=>{console.log("=== LAYOUT: AUTO SWITCH TOGGLE REQUESTED ==="),console.log("Requested state:",s),console.log("Current isAutoSwitchOn:",i),console.log("Current tickerData length:",u?.length||0);const a=setTimeout(()=>{console.log("Setting isAutoSwitchOn to:",s),w(s),s?(console.log("Auto switch ON - closing detail panel"),d(!1)):(console.log("Auto switch OFF - closing sidebar"),o(!1),n(null))},50);return()=>clearTimeout(a)},[i,u]);const N=t.useCallback(()=>{n(null),o(!1)},[]),C=t.useCallback(()=>{c?j():d(!0)},[c]),j=t.useCallback(()=>{d(!1)},[]);t.useCallback((s,a)=>{console.log(`Layer ${s} toggled: ${a}`)},[]);const L=t.useCallback((s,a)=>{m(a),n(s),o(!0)},[]);return t.useCallback((s,a)=>{const D=s?.name||s?.device_name||s?.station_name;if(console.log("Layout: Device change requested:",D,"index:",a),!s||a===void 0){console.warn("Layout: Invalid device or index provided");return}const E=setTimeout(()=>{m(a),n(s),o(!0),i&&d(!1)},10);if(window.mapboxAutoSwitch)try{window.mapboxAutoSwitch(s,a)}catch(A){console.error("Layout: Error calling mapboxAutoSwitch:",A)}return()=>clearTimeout(E)},[i]),e.jsxs("div",{className:"h-screen bg-gray-50 relative overflow-hidden",children:[e.jsx("div",{className:"w-full h-full relative z-0",children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse flex items-center justify-center",children:"Loading Map..."}),children:e.jsx(I,{ref:S,tickerData:u,onStationSelect:v,onAutoSwitch:L,isAutoSwitchOn:i,onCloseSidebar:()=>{i||(o(!1),n(null))}})})}),e.jsx("div",{className:"absolute top-4 left-4 right-4 z-20",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-12 bg-white/80 rounded-lg animate-pulse"}),children:e.jsx(T,{onSearch:k,placeholder:"Cari stasiun monitoring banjir..."})})})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-16 bg-white/80 animate-pulse"}),children:e.jsx(P,{onDataUpdate:f,onStationSelect:v,isSidebarOpen:b})}),e.jsx("div",{className:"absolute bottom-2 right-2 sm:bottom-4 sm:right-2 z-20",children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"h-20 bg-white/80 rounded animate-pulse"}),children:e.jsx(O,{})})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg p-8 animate-pulse",children:"Loading..."})}),children:e.jsx(R,{selectedStation:h,onClose:N,tickerData:u,isAutoSwitchOn:i,showArrow:!0,onArrowToggle:C,isDetailPanelOpen:c,onCloseDetailPanel:j})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-white shadow-lg animate-pulse"}),children:e.jsx(z,{isOpen:c,onClose:j,stationData:h,chartHistory:h?.history||[],isAutoSwitchOn:i})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-white shadow-lg animate-pulse"}),children:e.jsx(V,{isOpen:_,onOpen:()=>y(!0)})})]})},G=t.memo(F),U=({isOpen:l,onClose:u,title:f,subtitle:g,children:p,headerContent:h,showArrow:n=!1,onArrowToggle:b,isDetailPanelOpen:o=!1,onCloseDetailPanel:c})=>{const[d,x]=t.useState(!1);t.useEffect(()=>{l?setTimeout(()=>x(!0),10):x(!1)},[l]);const m=()=>{x(!1),o&&c&&c(),setTimeout(u,300)};return l?e.jsxs("div",{className:`fixed top-20 left-0 h-[calc(100vh-5rem)] w-96 bg-white shadow-2xl z-[60] transform transition-all duration-300 ease-in-out flex flex-col ${d?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,style:{willChange:"transform, opacity"},children:[e.jsx("div",{className:"bg-white p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-full transition-colors self-start mt-1",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex-1",children:h||e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f}),g&&e.jsx("p",{className:"text-gray-500 text-sm",children:g}),n&&!o&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:b,className:"group w-full flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200 hover:border-blue-500 hover:bg-blue-50 hover:shadow-lg transition-all duration-300 ease-in-out",title:"Buka Detail Panel",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-slate-800 group-hover:text-blue-800 transition-colors",children:"Detail Informasi"}),e.jsx("p",{className:"text-sm text-slate-500 group-hover:text-blue-600 transition-colors",children:"Lihat data lengkap stasiun"})]}),e.jsx("div",{className:"text-slate-400 group-hover:text-blue-600 group-hover:translate-x-1 transition-all duration-300",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:p})]}):null};export{G as L,U as S};
